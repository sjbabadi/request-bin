{"version":3,"sources":["services/bins.js","components/Home.js","components/Request.js","components/Bin.js","components/Header.js","App.js","index.js"],"names":["bins","get","slug","axios","then","response","data","catch","err","console","log","create","post","uri","Home","history","useHistory","useState","disabled","setDisabled","className","onClick","e","preventDefault","push","Request","headers","JSON","parse","method","timestamp","body","queryParams","query_params","nestedClass","Object","keys","map","key","style","whiteSpace","stringify","Bin","tub","setTub","requestURL","window","location","hostname","useEffect","socket","socketIOClient","emit","on","requests","disconnect","result","id","text","request","Header","to","App","match","useRouteMatch","params","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.251eb8ef.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst get = (slug) => {\n  const request = axios.get(`/data/${slug}`)\n  return request.then(response => {\n    return response.data\n  }).catch(err => {\n    console.log(err)\n  })\n}\n\nconst create = () => {\n  const request = axios.post(`/tubs`)\n  return request.then(response => response.data.uri)\n}\n\nconst bins = {\n  get,\n  create\n}\n\nexport default bins","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport bins from \"../services/bins\";\n\nconst Home = () => {\n  const history = useHistory();\n  const [disabled, setDisabled] = useState(false);\n\n  const createBin = (e) => {\n    e.preventDefault();\n    setDisabled(true);\n    bins.create().then((uri) => {\n      history.push(`/tub/${uri}`);\n    });\n  };\n\n  return (\n    <div className=\"pt-10 text-xl flex flex-col items-center \">\n      <p className=\"inline-block font-bold text-2xl\">Welcome!</p>\n      <p className=\"mt-8 inline-block \">\n        Request Tub is a place where you can send your API calls or webhooks to\n        gain valuable insight on their structure.\n      </p>\n      <p className=\"mt-8 inline-block \">\n        Tubs are ephemeral and disappear after 48 hours, and hold only the\n        latest 20 requests.\n      </p>\n      <p className=\"mt-8 inline-block \">Click \"Create Tub\" to get started!</p>\n      <button\n        disabled={disabled}\n        className=\"mt-8 bg-blue-500 hover:bg-blue-700 disabled:bg-gray-300 disabled:border-gray-500 text-white font-bold py-2 px-4 border border-blue-700 rounded\"\n        onClick={createBin}\n      >\n        Create Tub\n      </button>\n    </div>\n  );\n};\n\nexport default Home;\n","/*\n[URI] => {\n    \"Requests\": [\n      {\n        \"timestamp\": \"\",\n        \"method\": \"\",\n        \"query_params\": [\n          \"\": \"\" , (...)\n        ],\n        \"headers\": [\n          \"\" : \"\", (...)\n        ],\n        \"body\": \"\"\n      }, (...)\n    ]\n  }\n*/\nconst Request = ({ data }) => {\n  data = JSON.parse(data);\n  const headers = data.headers;\n  const method = data.method;\n  const timestamp = data.timestamp;\n  const body = data.body;\n  const queryParams = data.query_params;\n  const isJson =\n    !!headers[\"content-type\"] && headers[\"content-type\"] === \"application/json\";\n  const nestedClass = \"ml-8 text-xs truncate\";\n  console.log(body);\n  return (\n    <div className=\"p-3 mt-3 w-11/12 bg-indigo-200 border-2 border-indigo-400 rounded inline-block\">\n      <ul>\n        <li>\n          timestamp:{\" \"}\n          <code>\n            {timestamp}\n            <br />\n          </code>\n        </li>\n        <li>\n          method: <code>{method}</code> <br />\n        </li>\n        <li>\n          headers: <br />\n          <code>\n            <ul>\n              {Object.keys(headers).map((key) => (\n                <li className={nestedClass} key={key}>\n                  {\" \"}\n                  {key}: {headers[key]}\n                  <br />{\" \"}\n                </li>\n              ))}\n            </ul>\n          </code>\n        </li>\n\n        <li>\n          query parameters: <br />\n          <code>\n            <ul>\n              {Object.keys(queryParams).map((key) => (\n                <li className={nestedClass} key={key}>\n                  {key}: {queryParams[key]}\n                </li>\n              ))}\n            </ul>\n          </code>\n        </li>\n        <li>\n          body:\n          <code style={{ whiteSpace: \"pre\" }}>\n            {JSON.stringify(body, null, 2)}\n          </code>\n        </li>\n      </ul>\n    </div>\n  );\n};\n\nexport default Request;\n","import React, { useEffect, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport bins from \"../services/bins\";\nimport Request from \"./Request\";\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\nimport socketIOClient from \"socket.io-client\";\nconst ENDPOINT = \"/\";\n\nconst Bin = ({ slug }) => {\n  const [tub, setTub] = useState(null);\n\n  const history = useHistory();\n  const requestURL = `www.${window.location.hostname}/${slug}`;\n\n  useEffect(() => {\n    const socket = socketIOClient(ENDPOINT);\n    socket.emit(\"NewClient\", slug);\n    socket.on(\"UpdateTub\", ({ requests }) => {\n      setTub(requests);\n    });\n    return () => socket.disconnect();\n  }, [slug]);\n\n  useEffect(() => {\n    bins.get(slug).then((result) => {\n      if (result) {\n        let requests = result.requests;\n        setTub(requests);\n      } else {\n        // TODO: render 404 page instead\n        history.push(\"/\");\n      }\n    });\n  }, [history, slug]);\n\n  return (\n    <main>\n      <h3 className=\"mt-8 text-center text-2xl\">Tub API URL:</h3>\n      <h4 className=\"mt-2 text-center text-2xl mb-1.5\">\n        <code\n          id=\"requestURL\"\n          className=\"bg-gray-300 border-2 border-gray-400 hover:bg-gray-400 hover:border-gray-500 p-2 rounded\"\n        >\n          {requestURL}\n        </code>\n      </h4>\n      <CopyToClipboard text={requestURL}>\n        <button className=\"block mt-4 mx-auto bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 border border-purple-700 rounded\">\n          Copy URL\n        </button>\n      </CopyToClipboard>\n      <div className=\"flex flex-col items-center\">\n        {tub &&\n          tub.map((request) => (\n            <Request key={request.timestamp} data={JSON.stringify(request)} />\n          ))}\n      </div>\n    </main>\n  );\n};\n\nexport default Bin;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nconst Header = () => {\n\n  return ( \n    <h1 className=\" bg-purple-200 text-purple-900 text-center border-black font-bold p-6 text-5xl\">\n      <Link to='/' className=\"hover:text-indigo-500\">Request Tub</Link>\n    </h1>\n  )\n}\n\nexport default Header","import { Switch, Route, useRouteMatch } from \"react-router-dom\";\nimport Home from \"./components/Home\";\nimport Bin from \"./components/Bin\";\nimport Header from \"./components/Header\";\n\n/*\n  Bin:\n    Requests (list, sort by timestamp)\n      URI\n      timestamp\n      Headers (list, collapseable)\n      Parameters (list, collapseable)\n      Body\n        switch on encoding type?\n*/\n// const json = {\n//   timestamp: new Date().toString(),\n//   method: \"POST\",\n//   query_params: {\n//     amount: \"400\",\n//     length: \"60\",\n//     width: \"30\",\n//   },\n//   headers: {\n//     header1: \"value1\",\n//     header2: \"value2\",\n//   },\n//   body: '{\"Hi\":\"I\\'m json\"}'\n// }\nconst App = () => {\n  const match = useRouteMatch(\"/tub/:slug\");\n  const slug = match?.params?.slug;\n  return (\n    //<Request data={json} />\n    <div>\n      <Header />\n      <Switch>\n        <Route path=\"/tub/:slug\">\n          <Bin slug={slug} />\n        </Route>\n        <Route path=\"/\">\n          <Home />\n        </Route>\n      </Switch>\n    </div>\n  );\n};\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}